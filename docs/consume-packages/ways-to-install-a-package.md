---
title: Maneiras de instalar os pacotes do NuGet
description: Descreve o processo de instalação de pacotes NuGet em um projeto, incluindo o que acontece no disco e com os arquivos de projeto aplicáveis.
author: karann-msft
ms.author: karann
manager: unnir
ms.date: 02/12/2018
ms.topic: overview
ms.openlocfilehash: 0f59c3b7f1e32ae34889921c13d15074ef5c1260
ms.sourcegitcommit: 8e3546ab630a24cde8725610b6a68f8eb87afa47
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 07/05/2018
ms.locfileid: "37843375"
---
# <a name="different-ways-to-install-a-nuget-package"></a><span data-ttu-id="b0d29-103">Maneiras diferentes de instalar um pacote NuGet</span><span class="sxs-lookup"><span data-stu-id="b0d29-103">Different ways to install a NuGet Package</span></span>

<span data-ttu-id="b0d29-104">Os pacotes do NuGet serão baixados e instalados usando qualquer um dos métodos da tabela a seguir (veja [Instalar ferramentas de cliente do NuGet](../install-nuget-client-tools.md) se eles ainda não estiverem instalados).</span><span class="sxs-lookup"><span data-stu-id="b0d29-104">NuGet packages are downloaded and installed using any of the methods in the following table (see [Install NuGet client tools](../install-nuget-client-tools.md) if you don't have these installed already).</span></span> <span data-ttu-id="b0d29-105">É possível recuperar o pacote de um cache, em vez de baixá-lo.</span><span class="sxs-lookup"><span data-stu-id="b0d29-105">The package may be retrieved from a cache instead of downloaded.</span></span>

| <span data-ttu-id="b0d29-106">Método</span><span class="sxs-lookup"><span data-stu-id="b0d29-106">Method</span></span> | <span data-ttu-id="b0d29-107">Descrição</span><span class="sxs-lookup"><span data-stu-id="b0d29-107">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b0d29-108">CLI do dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="b0d29-108">dotnet.exe CLI</span></span><br/>`dotnet add package <package_name>` | <span data-ttu-id="b0d29-109">(Todas as plataformas) Recupera o pacote identificado por \<package_name\>, expande seu conteúdo para uma pasta no diretório atual e adiciona uma referência ao arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="b0d29-109">(All platforms) Retrieves the package identified by \<package_name\>, expands its contents into a folder in the current directory, and adds a reference to the project file.</span></span> <span data-ttu-id="b0d29-110">Além disso, recupera e instala as dependências.</span><span class="sxs-lookup"><span data-stu-id="b0d29-110">Also retrieves and installs dependencies.</span></span><ul><li>[<span data-ttu-id="b0d29-111">Instalar e usar um pacote (CLI do dotnet)</span><span class="sxs-lookup"><span data-stu-id="b0d29-111">Install and use a package (dotnet CLI)</span></span>](../quickstart/install-and-use-a-package-using-the-dotnet-cli.md)</li><li>[<span data-ttu-id="b0d29-112">comando dotnet add package</span><span class="sxs-lookup"><span data-stu-id="b0d29-112">dotnet add package command</span></span>](/dotnet/core/tools/dotnet-add-package)</li></ul> |
| <span data-ttu-id="b0d29-113">Interface do Usuário do Gerenciador de Pacotes (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="b0d29-113">Package Manager UI (Visual Studio)</span></span> | <span data-ttu-id="b0d29-114">(Windows e Mac) Fornece uma interface do usuário por meio da qual você pode procurar, selecionar e instalar pacotes e suas dependências em um projeto a partir de uma fonte do pacote especificado.</span><span class="sxs-lookup"><span data-stu-id="b0d29-114">(Windows and Mac) Provides a UI through which you can browse, select, and install packages and their dependencies into a project from a specified package source.</span></span> <span data-ttu-id="b0d29-115">Adicione referências a pacotes instalados ao arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="b0d29-115">Adds references to installed packages to the project file.</span></span><ul><li>[<span data-ttu-id="b0d29-116">Instalar e usar um pacote (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="b0d29-116">Install and use a package (Visual Studio)</span></span>](../quickstart/install-and-use-a-package-in-visual-studio.md)</li><li>[<span data-ttu-id="b0d29-117">Referência da interface do usuário do Gerenciador de Pacotes (Windows)</span><span class="sxs-lookup"><span data-stu-id="b0d29-117">Package Manager UI reference (Windows)</span></span>](../tools/package-manager-ui.md)</li><li>[<span data-ttu-id="b0d29-118">Incluir um pacote NuGet ao seu projeto (Mac)</span><span class="sxs-lookup"><span data-stu-id="b0d29-118">Including a NuGet package in your project (Mac)</span></span>](/visualstudio/mac/nuget-walkthrough)</li></ul> |
| <span data-ttu-id="b0d29-119">Console do Gerenciador de Pacotes (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="b0d29-119">Package Manager Console (Visual Studio)</span></span><br/>`Install-Package <package_name>` | <span data-ttu-id="b0d29-120">(Somente Windows) Recupera e instala o pacote identificado por \<package_name\> de uma fonte selecionada em um projeto especificado na solução, depois adiciona uma referência ao arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="b0d29-120">(Windows only) Retrieves and installs the package identified by \<package_name\> from a selected source into a specified project in the solution, then adds a reference to the project file.</span></span> <span data-ttu-id="b0d29-121">Além disso, recupera e instala as dependências.</span><span class="sxs-lookup"><span data-stu-id="b0d29-121">Also retrieves and installs dependencies.</span></span><ul><li>[<span data-ttu-id="b0d29-122">Instalar e usar um pacote (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="b0d29-122">Install and use a package (Visual Studio)</span></span>](../quickstart/install-and-use-a-package-in-visual-studio.md)</li><li>[<span data-ttu-id="b0d29-123">Guia do Console do Gerenciador de Pacotes</span><span class="sxs-lookup"><span data-stu-id="b0d29-123">Package Manager Console guide</span></span>](../tools/package-manager-console.md)</li></ul> |
| <span data-ttu-id="b0d29-124">CLI do nuget.exe</span><span class="sxs-lookup"><span data-stu-id="b0d29-124">nuget.exe CLI</span></span><br/>`nuget install <package_name>` | <span data-ttu-id="b0d29-125">(Todas as plataformas) Recupera o pacote identificado por \<package_name\> e expande seu conteúdo em uma pasta no diretório atual; também pode recuperar todos os pacotes listados em um arquivo do `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="b0d29-125">(All platforms) Retrieves the package identified by \<package_name\> and expands its contents into a folder in the current directory; can also retrieve all packages listed in a `packages.config` file.</span></span> <span data-ttu-id="b0d29-126">Também recupera e instala dependências, mas não altera arquivos de projeto ou `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="b0d29-126">Also retrieves and installs dependencies, but makes no changes to project files or `packages.config`.</span></span><ul><li>[<span data-ttu-id="b0d29-127">comando install</span><span class="sxs-lookup"><span data-stu-id="b0d29-127">install command</span></span>](../tools/cli-ref-install.md)</li></ul> |

## <a name="what-happens-when-a-package-is-installed"></a><span data-ttu-id="b0d29-128">O que acontece quando um pacote é instalado</span><span class="sxs-lookup"><span data-stu-id="b0d29-128">What happens when a package is installed</span></span>

<span data-ttu-id="b0d29-129">Em poucas palavras, as diferentes ferramentas NuGet normalmente criam uma referência a um pacote no arquivo de projeto ou em `packages.config`, depois executam uma restauração de pacote, o que efetivamente instala o pacote.</span><span class="sxs-lookup"><span data-stu-id="b0d29-129">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="b0d29-130">A exceção é `nuget install`, que apenas expande o pacote em uma pasta `packages` e não modifica nenhum outro arquivo.</span><span class="sxs-lookup"><span data-stu-id="b0d29-130">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="b0d29-131">O processo geral é o seguinte:</span><span class="sxs-lookup"><span data-stu-id="b0d29-131">The general process is as follows:</span></span>

1. <span data-ttu-id="b0d29-132">(Todas as ferramentas, exceto `nuget.exe`) Registre a versão e o identificador de pacote no arquivo de projeto ou em `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="b0d29-132">(All tools except `nuget.exe`) Record the package identifer and version into the project file or `packages.config`.</span></span>

2. <span data-ttu-id="b0d29-133">Adquira o pacote:</span><span class="sxs-lookup"><span data-stu-id="b0d29-133">Acquire the package:</span></span>
   - <span data-ttu-id="b0d29-134">Verifique se o pacote (pelo identificador exato ou pelo número da versão) já está instalado na pasta *global-packages* conforme descrito em [Como gerenciar as pastas de pacotes globais e de cache](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="b0d29-134">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="b0d29-135">Se o pacote não estiver armazenado na pasta *global-packages*, tente recuperá-lo das fontes listadas nos [arquivos de configuração](Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="b0d29-135">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed listed in the [configuration files](Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="b0d29-136">Para fontes online, primeiro tente recuperar o pacote do cache, a menos que `-NoCache` esteja especificado com comandos `nuget.exe` ou `--no-cache` esteja especificado com `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="b0d29-136">For online sources, attempt first to retrieve the package from the cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="b0d29-137">(O Visual Studio e o `dotnet add package` sempre usam o cache). Se for usado um pacote do cache, "CACHE" será exibido na saída.</span><span class="sxs-lookup"><span data-stu-id="b0d29-137">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="b0d29-138">O cache tem um tempo de expiração de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="b0d29-138">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="b0d29-139">Se o pacote não estiver armazenado no cache, tente baixá-lo das fontes listadas na configuração.</span><span class="sxs-lookup"><span data-stu-id="b0d29-139">If the package is not in the cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="b0d29-140">Se um pacote for baixado, "GET" e "OK" serão exibidos na saída.</span><span class="sxs-lookup"><span data-stu-id="b0d29-140">If a package is downloaded, "GET" and "OK" appear in the output.</span></span>

   - <span data-ttu-id="b0d29-141">Se o pacote não puder ser adquirido com êxito de nenhuma fonte, a instalação falhará neste ponto com um erro como [NU1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="b0d29-141">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="b0d29-142">Os erros de comandos `nuget.exe` mostram apenas a última fonte selecionada, mas implicam que o pacote não estava disponível de nenhuma fonte.</span><span class="sxs-lookup"><span data-stu-id="b0d29-142">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="b0d29-143">Na aquisição do pacote, a ordem das fontes na configuração do NuGet pode ser aplicável:</span><span class="sxs-lookup"><span data-stu-id="b0d29-143">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="b0d29-144">No caso dos projetos que usam o formato PackageReference, o NuGet verifica primeiro a pasta local de fontes e os compartilhamentos de rede antes de verificar as fontes HTTP.</span><span class="sxs-lookup"><span data-stu-id="b0d29-144">For projects using the PackageReference format, NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

   - <span data-ttu-id="b0d29-145">No caso dos projetos que usam o formato de gerenciamento `packages.config`, o NuGet usa a ordem das fontes na configuração.</span><span class="sxs-lookup"><span data-stu-id="b0d29-145">For projects using the `packages.config` management format, NuGet uses the order of the sources in the configuration.</span></span> <span data-ttu-id="b0d29-146">Uma exceção são as operações de restauração, caso em que a ordenação das fontes é ignorada e o NuGet usa o pacote da fonte que responder primeiro.</span><span class="sxs-lookup"><span data-stu-id="b0d29-146">An exception is restore operations, in which case source ordering is ignored and NuGet uses the package from whichever source responds first.</span></span>

   - <span data-ttu-id="b0d29-147">De modo geral, a ordem em que o NuGet verifica as fontes não é especialmente significativa, porque todos os pacotes fornecidos com um identificador e número de versão específicos são exatamente os mesmos em todas as fontes encontradas.</span><span class="sxs-lookup"><span data-stu-id="b0d29-147">In general, the order in which NuGet checks sources isn't particularly meaningful, because any given package with a specific identifier and version number is exactly the same on whatever source it's found.</span></span>

3. <span data-ttu-id="b0d29-148">(Todas as ferramentas, exceto `nuget.exe`) salvam uma cópia do pacote e outras informações na pasta *http-cache*, conforme descrito em [Como gerenciar as pastas de pacotes globais e de cache](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="b0d29-148">(All tools except `nuget.exe`) Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="b0d29-149">Se o pacote for baixado, instale-o na pasta *global-packages* por usuário.</span><span class="sxs-lookup"><span data-stu-id="b0d29-149">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="b0d29-150">O NuGet cria uma subpasta para cada identificador de pacote e, em seguida, cria subpastas para cada versão instalada do pacote.</span><span class="sxs-lookup"><span data-stu-id="b0d29-150">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="b0d29-151">Atualize outros arquivos de projeto e pastas:</span><span class="sxs-lookup"><span data-stu-id="b0d29-151">Update other project files and folders:</span></span>

    - <span data-ttu-id="b0d29-152">Em caso de projetos que usam PackageReference, atualize o grafo de dependência do pacote armazenado em `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="b0d29-152">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="b0d29-153">O conteúdo do pacote em si não é copiado para nenhuma pasta de projeto.</span><span class="sxs-lookup"><span data-stu-id="b0d29-153">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="b0d29-154">Em projetos que usam `packages.config`, copie as partes do pacote expandido que correspondem à estrutura de destino do projeto na pasta `packages` do projeto.</span><span class="sxs-lookup"><span data-stu-id="b0d29-154">For projects using `packages.config`, copy those parts of the expanded package that match the project's target framework into project's `packages` folder.</span></span> <span data-ttu-id="b0d29-155">(Quando `nuget install` é usado, todo o pacote expandido é copiado, pois `nuget.exe` não examina arquivos de projeto para identificar a estrutura de destino).</span><span class="sxs-lookup"><span data-stu-id="b0d29-155">(When using `nuget install`, the entire expanded package is copied because `nuget.exe` does not examine project files to identify the target framework.)</span></span>
    - <span data-ttu-id="b0d29-156">Atualize `app.config` e/ou `web.config` se o pacote usar [transformações de origem e arquivo de configuração](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="b0d29-156">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

6. <span data-ttu-id="b0d29-157">Instale todas as dependências de nível inferior se não estiverem presentes no projeto.</span><span class="sxs-lookup"><span data-stu-id="b0d29-157">Install any down-level dependencies if not already present in the project.</span></span> <span data-ttu-id="b0d29-158">Esse processo pode atualizar versões do pacote, conforme descrito em [Resolução de dependências](../consume-packages/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="b0d29-158">This process might update package versions in the process, as described in [Dependency Resolution](../consume-packages/dependency-resolution.md).</span></span>

7. <span data-ttu-id="b0d29-159">(Somente no Visual Studio) Exiba o arquivo Leiame do pacote, se disponível, em uma janela do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b0d29-159">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

## <a name="related-articles"></a><span data-ttu-id="b0d29-160">Artigos relacionados</span><span class="sxs-lookup"><span data-stu-id="b0d29-160">Related articles</span></span>

- [<span data-ttu-id="b0d29-161">Visão geral e fluxo de trabalho do consumo de pacote</span><span class="sxs-lookup"><span data-stu-id="b0d29-161">Overview and workflow of package consumption</span></span>](../consume-packages/overview-and-workflow.md)
- [<span data-ttu-id="b0d29-162">Localizando e escolhendo pacotes</span><span class="sxs-lookup"><span data-stu-id="b0d29-162">Finding and choosing packages</span></span>](../consume-packages/finding-and-choosing-packages.md)
- [<span data-ttu-id="b0d29-163">Como gerenciar as pastas global-packages e de cache do NuGet</span><span class="sxs-lookup"><span data-stu-id="b0d29-163">Managing the NuGet cache and global-packages folders</span></span>](managing-the-global-packages-and-cache-folders.md)
- [<span data-ttu-id="b0d29-164">Configuração do comportamento de NuGet</span><span class="sxs-lookup"><span data-stu-id="b0d29-164">Configuring NuGet behavior</span></span>](../consume-packages/configuring-nuget-behavior.md)
