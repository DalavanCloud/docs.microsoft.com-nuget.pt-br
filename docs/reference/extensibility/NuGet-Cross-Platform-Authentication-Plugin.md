---
title: NuGet cross plug-in de autenticação de plataforma
description: NuGet cross plug-ins de autenticação de plataforma para NuGet.exe, dotnet.exe, msbuild.exe e Visual Studio
author: nkolev92
ms.author: nikolev
ms.date: 07/01/2018
ms.topic: conceptual
ms.openlocfilehash: d80339eb81ade1cf2c323a604cc4fac06dcb1012
ms.sourcegitcommit: 09107c5092050f44a0c6abdfb21db73878f78bd0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/03/2018
ms.locfileid: "50981048"
---
# <a name="nuget-cross-platform-authentication-plugin"></a><span data-ttu-id="db90a-103">NuGet cross plug-in de autenticação de plataforma</span><span class="sxs-lookup"><span data-stu-id="db90a-103">NuGet cross platform authentication plugin</span></span>

<span data-ttu-id="db90a-104">Na versão 4.8 + NuGet todos os clientes (NuGet.exe, Visual Studio, dotnet.exe e MSBuild.exe) podem usar um plug-in de autenticação criado na parte superior dos [NuGet cruzada plugins de plataforma](NuGet-Cross-Platform-Plugins.md) modelo.</span><span class="sxs-lookup"><span data-stu-id="db90a-104">In version 4.8+, all NuGet clients (NuGet.exe, Visual Studio, dotnet.exe and MSBuild.exe) can use an authentication plugin built on top of the [NuGet cross platform plugins](NuGet-Cross-Platform-Plugins.md) model.</span></span>

## <a name="authentication-in-dotnetexe"></a><span data-ttu-id="db90a-105">Autenticação no dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="db90a-105">Authentication in dotnet.exe</span></span>

<span data-ttu-id="db90a-106">O Visual Studio e NuGet.exe são por padrão interativo.</span><span class="sxs-lookup"><span data-stu-id="db90a-106">Visual Studio and NuGet.exe are by default interactive.</span></span> <span data-ttu-id="db90a-107">NuGet.exe conterá um comutador para torná-lo [não interativo](../../tools/nuget-exe-CLI-Reference.md).</span><span class="sxs-lookup"><span data-stu-id="db90a-107">NuGet.exe contains a switch to make it [non interactive](../../tools/nuget-exe-CLI-Reference.md).</span></span>
<span data-ttu-id="db90a-108">Além disso, os plug-ins NuGet.exe e o Visual Studio solicitará a entrada do usuário.</span><span class="sxs-lookup"><span data-stu-id="db90a-108">Additionally the NuGet.exe and Visual Studio plugins prompt the user for input.</span></span>
<span data-ttu-id="db90a-109">Dotnet.exe não há nenhum aviso e o padrão é não interativo.</span><span class="sxs-lookup"><span data-stu-id="db90a-109">In dotnet.exe there is no prompting and the default is non interactive.</span></span>

<span data-ttu-id="db90a-110">O mecanismo de autenticação no dotnet.exe é o fluxo do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="db90a-110">The authentication mechanism in dotnet.exe is device flow.</span></span> <span data-ttu-id="db90a-111">Quando a restauração ou adicionar a operação de pacote é executada interativamente, os blocos de operação e se as instruções para o usuário como concluída as autenticações serão ser fornecidas na linha de comando.</span><span class="sxs-lookup"><span data-stu-id="db90a-111">When the restore or add package operation is run interactively, the operation blocks and instructions to the user how to complete the authentications will be provided on the command line.</span></span>
<span data-ttu-id="db90a-112">Quando o usuário conclui a autenticação continuará a operação.</span><span class="sxs-lookup"><span data-stu-id="db90a-112">When the user completes the authentication the operation will continue.</span></span>

<span data-ttu-id="db90a-113">Para que a operação interativa, um deve passar `--interactive`.</span><span class="sxs-lookup"><span data-stu-id="db90a-113">To make the operation interactive, one should pass `--interactive`.</span></span>
<span data-ttu-id="db90a-114">Atualmente, apenas explícito `dotnet restore` e `dotnet add package` comandos dão suporte a um comutador interativo.</span><span class="sxs-lookup"><span data-stu-id="db90a-114">Currently only the explicit `dotnet restore` and `dotnet add package` commands support an interactive switch.</span></span>
<span data-ttu-id="db90a-115">Não há nenhuma opção interativa na `dotnet build` e `dotnet publish`.</span><span class="sxs-lookup"><span data-stu-id="db90a-115">There is no interactive switch on `dotnet build` and `dotnet publish`.</span></span>

## <a name="authentication-in-msbuild"></a><span data-ttu-id="db90a-116">Autenticação no MSBuild</span><span class="sxs-lookup"><span data-stu-id="db90a-116">Authentication in MSBuild</span></span>

<span data-ttu-id="db90a-117">Semelhante ao dotnet.exe, MSBuild.exe é por padrão, não que é o mecanismo de autenticação MSBuild.exe interativo fluxo do dispositivo.</span><span class="sxs-lookup"><span data-stu-id="db90a-117">Similar to dotnet.exe, MSBuild.exe is by default non interactive the MSBuild.exe authentication mechanism is device flow.</span></span>
<span data-ttu-id="db90a-118">Para permitir que a restauração pause e aguarde para autenticação, chame a restauração com `msbuild /t:restore /p:NuGetInteractive="true"`.</span><span class="sxs-lookup"><span data-stu-id="db90a-118">To allow the restore to pause and wait for authentication, call restore with `msbuild /t:restore /p:NuGetInteractive="true"`.</span></span>

## <a name="creating-a-cross-platform-authentication-plugin"></a><span data-ttu-id="db90a-119">Criando um plug-in de autenticação de plataforma cruzada</span><span class="sxs-lookup"><span data-stu-id="db90a-119">Creating a cross platform authentication plugin</span></span>

<span data-ttu-id="db90a-120">Uma implementação de exemplo pode ser encontrada no [plug-in do provedor de credenciais do Microsoft](https://github.com/Microsoft/artifacts-credprovider).</span><span class="sxs-lookup"><span data-stu-id="db90a-120">A sample implementation can be found in [Microsoft Credential Provider plugin](https://github.com/Microsoft/artifacts-credprovider).</span></span>

<span data-ttu-id="db90a-121">É muito importante que os plug-ins está em conformidade com os requisitos de segurança estabelecidos pelas ferramentas de cliente do NuGet.</span><span class="sxs-lookup"><span data-stu-id="db90a-121">It's very important that the plugins conforms to the security requirements set forth by the NuGet client tools.</span></span>
<span data-ttu-id="db90a-122">O mínimo necessário é de versão para um plug-in ser um plug-in de autenticação *2.0.0*.</span><span class="sxs-lookup"><span data-stu-id="db90a-122">The minimum required version for a plugin to be an authentication plugin is *2.0.0*.</span></span>
<span data-ttu-id="db90a-123">NuGet executará o handshake com o plug-in e a consulta para as declarações de operação com suporte.</span><span class="sxs-lookup"><span data-stu-id="db90a-123">NuGet will perform the handshake with the plugin and query for the supported operation claims.</span></span>
<span data-ttu-id="db90a-124">Consulte o NuGet cruzada plug-in de plataforma [mensagens de protocolo](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) para obter mais detalhes sobre as mensagens específicas.</span><span class="sxs-lookup"><span data-stu-id="db90a-124">Please refer to the NuGet cross platform plugin [protocol messages](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) for more details about the specific messages.</span></span>

<span data-ttu-id="db90a-125">O NuGet será definir o nível de log e fornecer informações de proxy para o plug-in quando aplicável.</span><span class="sxs-lookup"><span data-stu-id="db90a-125">NuGet will set the log level and provide proxy information to the plugin when applicable.</span></span>
<span data-ttu-id="db90a-126">Registro em log para o NuGet console só é aceitável após NuGet tiver definido o nível de log para o plug-in.</span><span class="sxs-lookup"><span data-stu-id="db90a-126">Logging to the NuGet console is only acceptable after NuGet has set the log level to the plugin.</span></span>

- <span data-ttu-id="db90a-127">Comportamento de autenticação de plug-in do .NET framework</span><span class="sxs-lookup"><span data-stu-id="db90a-127">.NET Framework plugin authentication behavior</span></span>

<span data-ttu-id="db90a-128">No .NET Framework, os plug-ins são permitidos para solicitar que um usuário para entrada, na forma de uma caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-128">In .NET Framework, the plugins are allowed to prompt a user for input, in the form of a dialog.</span></span>

- <span data-ttu-id="db90a-129">Comportamento de autenticação de plug-in do .NET core</span><span class="sxs-lookup"><span data-stu-id="db90a-129">.NET Core plugin authentication behavior</span></span>

<span data-ttu-id="db90a-130">No .NET Core, não é possível mostrar uma caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-130">In .NET Core, a dialog cannot be shown.</span></span> <span data-ttu-id="db90a-131">Os plug-ins devem usar o fluxo do dispositivo para autenticar.</span><span class="sxs-lookup"><span data-stu-id="db90a-131">The plugins should use device flow to authenticate.</span></span>
<span data-ttu-id="db90a-132">O plug-in pode enviar mensagens de log para o NuGet com instruções para o usuário.</span><span class="sxs-lookup"><span data-stu-id="db90a-132">The plugin can send log messages to NuGet with instructions to the user.</span></span>
<span data-ttu-id="db90a-133">Observe que o registro em log está disponível depois que o nível de log tiver sido definido para o plug-in.</span><span class="sxs-lookup"><span data-stu-id="db90a-133">Note that logging is available after the log level has been set to the plugin.</span></span>
<span data-ttu-id="db90a-134">O NuGet não terão qualquer entrada interativa da linha de comando.</span><span class="sxs-lookup"><span data-stu-id="db90a-134">NuGet will not take any interactive input from the command line.</span></span>

<span data-ttu-id="db90a-135">Quando o cliente chama o plug-in com uma obter credenciais de autenticação, os plug-ins precisam estar de acordo com a opção de interatividade e respeita a opção de caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-135">When the client calls the plugin with a Get Authentication Credentials, the plugins need to conform to the interactivity switch and respect the dialog switch.</span></span> 

<span data-ttu-id="db90a-136">A tabela a seguir resume como o plug-in deve se comportar para todas as combinações.</span><span class="sxs-lookup"><span data-stu-id="db90a-136">The following table summarizes how the plugin should behave for all combinations.</span></span>

| <span data-ttu-id="db90a-137">IsNonInteractive</span><span class="sxs-lookup"><span data-stu-id="db90a-137">IsNonInteractive</span></span> | <span data-ttu-id="db90a-138">CanShowDialog</span><span class="sxs-lookup"><span data-stu-id="db90a-138">CanShowDialog</span></span> | <span data-ttu-id="db90a-139">Comportamento de plug-in</span><span class="sxs-lookup"><span data-stu-id="db90a-139">Plugin behavior</span></span> |
| ---------------- | ------------- | --------------- |
| <span data-ttu-id="db90a-140">true</span><span class="sxs-lookup"><span data-stu-id="db90a-140">true</span></span> | <span data-ttu-id="db90a-141">true</span><span class="sxs-lookup"><span data-stu-id="db90a-141">true</span></span> | <span data-ttu-id="db90a-142">O comutador IsNonInteractive tem precedência sobre a opção de caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-142">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="db90a-143">O plug-in não é permitido para mostrar uma caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-143">The plugin is not allowed to pop a dialog.</span></span> <span data-ttu-id="db90a-144">Essa combinação só é válida para o plug-ins do .NET Framework</span><span class="sxs-lookup"><span data-stu-id="db90a-144">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="db90a-145">true</span><span class="sxs-lookup"><span data-stu-id="db90a-145">true</span></span> | <span data-ttu-id="db90a-146">false</span><span class="sxs-lookup"><span data-stu-id="db90a-146">false</span></span> | <span data-ttu-id="db90a-147">O comutador IsNonInteractive tem precedência sobre a opção de caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-147">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="db90a-148">O plug-in não tem permissão para bloquear.</span><span class="sxs-lookup"><span data-stu-id="db90a-148">The plugin is not allowed to block.</span></span> <span data-ttu-id="db90a-149">Essa combinação só é válida para o plug-ins do .NET Core</span><span class="sxs-lookup"><span data-stu-id="db90a-149">This combination is only valid for .NET Core plugins</span></span> |
| <span data-ttu-id="db90a-150">false</span><span class="sxs-lookup"><span data-stu-id="db90a-150">false</span></span> | <span data-ttu-id="db90a-151">true</span><span class="sxs-lookup"><span data-stu-id="db90a-151">true</span></span> | <span data-ttu-id="db90a-152">O plug-in deve mostrar uma caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-152">The plugin should show a dialog.</span></span> <span data-ttu-id="db90a-153">Essa combinação só é válida para o plug-ins do .NET Framework</span><span class="sxs-lookup"><span data-stu-id="db90a-153">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="db90a-154">false</span><span class="sxs-lookup"><span data-stu-id="db90a-154">false</span></span> | <span data-ttu-id="db90a-155">false</span><span class="sxs-lookup"><span data-stu-id="db90a-155">false</span></span> | <span data-ttu-id="db90a-156">O plug-in deve/pode não mostrar uma caixa de diálogo.</span><span class="sxs-lookup"><span data-stu-id="db90a-156">The plugin should/can not show a dialog.</span></span> <span data-ttu-id="db90a-157">O plug-in deve usar o fluxo do dispositivo para autenticar pelo registro em log uma mensagem de instrução por meio do agente de log.</span><span class="sxs-lookup"><span data-stu-id="db90a-157">The plugin should use device flow to authenticate by logging an instruction message via the logger.</span></span> <span data-ttu-id="db90a-158">Essa combinação só é válida para o plug-ins do .NET Core</span><span class="sxs-lookup"><span data-stu-id="db90a-158">This combination is only valid for .NET Core plugins</span></span> |

<span data-ttu-id="db90a-159">Consulte as especificações a seguir antes de escrever um plug-in.</span><span class="sxs-lookup"><span data-stu-id="db90a-159">Please refer to the following specs before writing a plugin.</span></span>

- [<span data-ttu-id="db90a-160">Plug-in de Download de pacote do NuGet</span><span class="sxs-lookup"><span data-stu-id="db90a-160">NuGet Package Download Plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-Package-Download-Plugin)
- [<span data-ttu-id="db90a-161">NuGet cruzada plug-in de autenticação de várias plataformas</span><span class="sxs-lookup"><span data-stu-id="db90a-161">NuGet cross plat authentication plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-cross-plat-authentication-plugin)
